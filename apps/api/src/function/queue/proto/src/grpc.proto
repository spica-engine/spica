syntax = "proto3";

package Grpc;

message Header {
  string key = 1;
  string value = 2;
}

message Request {
  string id = 1;
  string service = 2;
  string method = 3;
  bytes payload = 4;
  repeated Header metadata = 5;

  message Pop {
    string id = 1;
  }
}

message Response {
  string id = 1;
  int32 status = 2;
  bytes data = 3;
  repeated Header metadata = 4;

  message Result {}
}

message Error {
  string id = 1;
  int32 code = 2;
  string message = 3;
  repeated Header metadata = 4;

  message Result {}
}

service Queue {
  rpc pop(Request.Pop) returns (Request);
  rpc sendResponse(Response) returns (Response.Result);
  rpc sendError(Error) returns (Error.Result);
}